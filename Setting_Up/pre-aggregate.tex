\subsubsection{Description of Process}
Stairwalker makes use of the Pre-Aggregate functions. These functions create a granularity in the dataset and calculate blocks at the lowest granularity for certain dimensions. Then subsequent blocks of higher granularity are built up from lower blocks. This creates a new dataset which as summarized the original dataset in terms of blocks which represent some significant data for every level of granularity and dimension.

%Is dit duidelijk? Klopt dit eigenlijk??
%Nog iets met index of zo...
\noindent Concretely take the dataset of tweets sent within the netherlands. A pre-aggregation of this data could be in the following form. As significant data we consider the number of tweets in the x- and y-coordinate dimensions. We then set a highest granularity (zoom). The pre-aggregate algorithm then creates blocks bounded by the x- and y-coordinates at the highest granularity and for all those blocks calculates the number of tweets within those coordinates. Then each subsequent layer is built up from the previous layer. The final result is a new dataset which contains all blocks with the number of tweets in a coordinate block at each level of granularity.

\subsubsection{PreAggregate Tool}
To do the Pre-Aggregation step a tool has been develped which is explained here.

\noindent The tool can be found in the directory \lstinline$neogeo/pre-aggregate-tools/$. To generate the binary tools from source the Appassembler plugin of Maven is used. Run the following command to generate the tool.
\begin{lstlisting}
mvn package appassembler:assemble
\end{lstlisting}
After successful completion of this command a new directory \lstinline$appassembler$ will have been created in the \lstinline$target$ directory containing a \lstinline$repo$ and a \lstinline$bin$ directory. The \lstinline$bin$ directory contains the actual binaries of the tool (in both Linux/Unix and Windows version) and the \lstinline$repo$ directory contains the tool dependencies. The tool should now be ready for use.

The tool is used to create a PreAggregate index for a table with $\textit{n}$ dimensions and a measure/aggregate column. It uses with the following commands:
\begin{lstlisting}[basicstyle=\small]
usage: create-pa-index
 -axistosplit <axis index>    &index of axis to split&
 -chunksize <size>            maximum chunk size after split
 -config <file>               PreAggregate XML config file
 -d,--database <dbname>       name of database
 -dbtype <postgresql|monetdb> type of database
 -h,--host <host>             database host name or ip address
 -help                        prints this help message
 -p,--port <port>             port number of the database
 -password <password>         database password
 -s,--schema <schema>         schema name in the database
 -u,--user <user>             database username
 -v,--verbose                 Enable verbose output logging
\end{lstlisting}
The tool is dependent on the \lstinline$PreAggregate.XML$ config file which is used to define the PreAggregate index by specifying the column to aggregate, the type of aggregate that should done and the dimensions to include. In the \lstinline$neogeo/pre-aggregate-tools/$ directory a sample configuration file is included.

\todo[inline, size=\small]{How does this tool work nominal axis? More preprocessing may be required when first parsing words? Example london\_words or gender\_words}

see~\Fref{sec:PreAggregateDev} for more detail about preaggregation not using the special help tool.

Appart from creating a new Pre-Aggregation 
\subsubsection{Current Status Support of Datatypes}
\begin{enumerate}
	\item Aggregate Axis
	\item Metric Axis
	\item Nominal Axis
\end{enumerate}

\subsubsection{Current Status Support of Aggregation Types}
\begin{enumerate}
	\item MIN
	\item MAX
	\item COUNT
	\item SUM
\end{enumerate}